<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Happy Birthday, Freedom</title>
<style>
  body{
    margin:0;
    background:#0b0c10;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    overflow:hidden;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  }

  .stage{
    width:100%;
    display:flex;
    justify-content:center;
    align-items:center;
  }

  .book{
    position:relative;
    width:min(92vw,900px);
    height:min(70vh,650px);
    perspective:2200px;
  }

  .page{
    position:absolute;
    inset:0;
    transform-origin:left center;
    transform-style:preserve-3d;
    transition:transform 0.95s cubic-bezier(.55,.06,.68,.19);
    box-shadow:0 20px 55px rgba(0,0,0,.62);
    background:#111;
    cursor:pointer;
    border-radius:10px;
    overflow:hidden;
  }

  .page img{
    width:100%;
    height:100%;
    object-fit:contain;
    backface-visibility:hidden;
    pointer-events:none;
    display:block;
  }

  .page.flipped{
    transform:rotateY(-180deg);
  }

  /* Controls */
  .controls{
    position:fixed;
    left:0;
    right:0;
    bottom:18px;
    display:flex;
    justify-content:center;
    gap:12px;
    z-index:10000;
    padding:0 12px;
  }

  button{
    padding:10px 18px;
    border-radius:10px;
    border:none;
    background:#1f2430;
    color:#fff;
    cursor:pointer;
    box-shadow:0 10px 24px rgba(0,0,0,.35);
  }
  button:hover{ background:#2d3342; }
  button:disabled{ opacity:.45; cursor:not-allowed; }

  /* End-only Start Over button (center) */
  .restart-btn{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    padding:14px 22px;
    border-radius:12px;
    border:none;
    background: rgba(255,255,255,0.10);
    color:#fff;
    font-size:16px;
    cursor:pointer;
    backdrop-filter: blur(6px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.45);
    display:none;
    z-index:99999;
  }
  .restart-btn:hover{
    background: rgba(255,255,255,0.16);
  }

  /* Mobile tweaks */
  @media (max-width:600px){
    .book{ height:min(74vh,720px); }
    button{ padding:10px 14px; }
  }

  @media (prefers-reduced-motion: reduce){
    .page{ transition:none !important; }
  }
</style>
</head>
<body>
  <div class="stage">
    <div class="book" id="book">
      <div class="page" data-index="0" onclick="nextPage()"><img src="assets/img/page-01.webp" alt="Page 1"></div>
<div class="page" data-index="1" onclick="nextPage()"><img src="assets/img/page-02.webp" alt="Page 2"></div>
<div class="page" data-index="2" onclick="nextPage()"><img src="assets/img/page-03.webp" alt="Page 3"></div>
<div class="page" data-index="3" onclick="nextPage()"><img src="assets/img/page-04.webp" alt="Page 4"></div>
<div class="page" data-index="4" onclick="nextPage()"><img src="assets/img/page-05.webp" alt="Page 5"></div>
<div class="page" data-index="5" onclick="nextPage()"><img src="assets/img/page-06.webp" alt="Page 6"></div>
<div class="page" data-index="6" onclick="nextPage()"><img src="assets/img/page-07.webp" alt="Page 7"></div>
<div class="page" data-index="7" onclick="nextPage()"><img src="assets/img/page-08.webp" alt="Page 8"></div>
<div class="page" data-index="8" onclick="nextPage()"><img src="assets/img/page-09.webp" alt="Page 9"></div>
<div class="page" data-index="9" onclick="nextPage()"><img src="assets/img/page-10.webp" alt="Page 10"></div>
<div class="page" data-index="10" onclick="nextPage()"><img src="assets/img/page-11.webp" alt="Page 11"></div>
<div class="page" data-index="11" onclick="nextPage()"><img src="assets/img/page-12.webp" alt="Page 12"></div>
<div class="page" data-index="12" onclick="nextPage()"><img src="assets/img/page-13.webp" alt="Page 13"></div>
      <button class="restart-btn" id="restartBtn" onclick="startOver()">Start Over</button>
    </div>
  </div>

  <div class="controls">
    <button id="prevBtn" onclick="prevPage()">Prev</button>
    <button id="nextBtn" onclick="nextPage()">Next</button>
  </div>

  <audio id="flipSound" src="assets/flip.mp4" preload="auto"></audio>

<script>
  const pages = document.querySelectorAll('.page');
  let current = 0;

  pages.forEach((p, i) => {
    p.style.zIndex = pages.length - i;
  });

  const restartBtn = document.getElementById("restartBtn");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const flipSound = document.getElementById("flipSound");

  function playSound(){
    try {
      flipSound.currentTime = 0;
      flipSound.play();
    } catch(e) {}
  }

  function updateUI(){
    restartBtn.style.display = (current === pages.length) ? "block" : "none";
    prevBtn.disabled = (current === 0);
    nextBtn.disabled = (current === pages.length);
  }

  function nextPage(){
    if (current < pages.length) {
      pages[current].classList.add('flipped');
      playSound();
      current++;
      updateUI();
    }
  }

  function prevPage(){
    if (current > 0) {
      current--;
      pages[current].classList.remove('flipped');
      playSound();
      updateUI();
    }
  }

  function startOver(){
    while (current > 0) {
      current--;
      pages[current].classList.remove('flipped');
    }
    updateUI();
  }

  document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowRight") nextPage();
    if (e.key === "ArrowLeft") prevPage();
  });

  // Tap/click left/right edges to navigate (great on mobile)
  document.getElementById("book").addEventListener("click", (e) => {
    if (e.target && e.target.id === "restartBtn") return;
    const rect = e.currentTarget.getBoundingClientRect();
    const x = e.clientX - rect.left;
    if (x < rect.width * 0.35) {
      prevPage();
      e.stopPropagation();
    } else if (x > rect.width * 0.65) {
      nextPage();
      e.stopPropagation();
    }
  });

  updateUI();
</script>
</body>
</html>
